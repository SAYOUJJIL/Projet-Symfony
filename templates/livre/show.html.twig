{% extends 'base.html.twig' %}

{% block title %}Livre{% endblock %}
{% block stylesheets %}
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />
       <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
       
       <style>
                    /* CSS */
            .button-18 {
            align-items: center;
            background-color: #27AE60;
            border: 0;
            border-radius: 100px;
            box-sizing: border-box;
            color: #ffffff;
            cursor: pointer;
            display: inline-flex;
            font-weight: 600;
            justify-content: center;
            line-height: 20px;
            max-width: 480px;
            min-height: 40px;
            min-width: 0px;
            overflow: hidden;
            padding: 0px;
            padding-left: 20px;
            padding-right: 20px;
            text-align: center;
            touch-action: manipulation;
            transition: background-color 0.167s cubic-bezier(0.4, 0, 0.2, 1) 0s, box-shadow 0.167s cubic-bezier(0.4, 0, 0.2, 1) 0s, color 0.167s cubic-bezier(0.4, 0, 0.2, 1) 0s;
            user-select: none;
            -webkit-user-select: none;
            vertical-align: middle;
            text-decoration: none;
            }

            .button-18:hover,
            .button-18:focus { 
            background-color: #16437E;
            color: #ffffff;
            }

            .button-18:active {
            background: #09223b;
            color: rgb(255, 255, 255, .7);
            }

            .button-18:disabled { 
            cursor: not-allowed;
            background: rgba(0, 0, 0, .08);
            color: rgba(0, 0, 0, .3);
            }


            .backhome{
            background-color: #668BC4    ;
            color: #ffffff;
            text-decoration: none;
            }
            .removebtn{
                background-color:#C44B3F;
            }

        @import url("https://fonts.googleapis.com/css?family=Roboto");

            * {
                margin: 0;
                padding: 0;
            }
            i {
                margin-right: 10px;
            }
            /*----------bootstrap-navbar-css------------*/
            .navbar-logo {
                padding: 15px;
                color: #fff;
                width:40%;
            }
            .navbar-mainbg {
                background-color: #3879B7;
                padding: 0px;
            }
            #navbarSupportedContent {
                overflow: hidden;
                position: relative;
            }
            #navbarSupportedContent ul {
                padding: 0px;
                margin: 0px;
            }
            #navbarSupportedContent ul li a i {
             margin-right: 10px;
            }
            #navbarSupportedContent li {
                list-style-type: none;
                float: left;
            }
            #navbarSupportedContent ul li a {
                color: white;
                text-decoration: none;
                font-size: 15px;
                display: block;
                padding: 20px 20px;
                transition-duration: 0.6s;
                transition-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55);
                 position: relative;
            }
            #navbarSupportedContent > ul > li.active > a {
            color: #5161ce;
            background-color: transparent;
            transition: all 0.7s;
            }
            #navbarSupportedContent a:not(:only-child):after {
                content: "\f105";
                position: absolute;
                right: 20px;
                top: 10px;
                font-size: 14px;
                font-family: "Font Awesome 5 Free";
                display: inline-block;
                padding-right: 3px;
                vertical-align: middle;
                font-weight: 900;
                transition: 0.5s;
            }
            #navbarSupportedContent .active > a:not(:only-child):after {
            transform: rotate(90deg);
            }
            .hori-selector {
            display: inline-block;
            position: absolute;
            height: 100%;
            top: 0px;
            left: 0px;
            transition-duration: 0.6s;
            transition-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55);
            background-color: #fff;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            margin-top: 10px;
            }
            .hori-selector .right,
            .hori-selector .left {
            position: absolute;
            width: 25px;
            height: 25px;
            background-color: #fff;
            bottom: 10px;
            }
            .hori-selector .right {
            right: -25px;
            }
            .hori-selector .left {
            left: -25px;
            }
            .hori-selector .right:before,
            .hori-selector .left:before {
            content: "";
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #3879B7;
            }
            .hori-selector .right:before {
            bottom: 0;
            right: -25px;
            }
            .hori-selector .left:before {
            bottom: 0;
            left: -25px;
            }

            @media (min-width: 992px) {
            .navbar-expand-custom {
                -ms-flex-flow: row nowrap;
                flex-flow: row nowrap;
                -ms-flex-pack: start;
                justify-content: flex-start;
            }
            .navbar-expand-custom .navbar-nav {
                -ms-flex-direction: row;
                flex-direction: row;
            }
            .navbar-expand-custom .navbar-toggler {
                display: none;
            }
            .navbar-expand-custom .navbar-collapse {
                display: -ms-flexbox !important;
                display: flex !important;
                -ms-flex-preferred-size: auto;
                flex-basis: auto;
            }
            }

            @media (max-width: 991px) {
            #navbarSupportedContent ul li a {
                padding: 12px 30px;
            }
            .hori-selector {
                margin-top: 0px;
                margin-left: 10px;
                border-radius: 0;
                border-top-left-radius: 25px;
                border-bottom-left-radius: 25px;
            }
            .hori-selector .left,
            .hori-selector .right {
                right: 10px;
            }
            .hori-selector .left {
                top: -25px;
                left: auto;
            }
            .hori-selector .right {
                bottom: -25px;
            }
            .hori-selector .left:before {
                left: -25px;
                top: -25px;
            }
            .hori-selector .right:before {
                bottom: -25px;
                left: -25px;
            }
            }
            .container{
            max-width: 960px;
            background: #fff;
            width: 800px;
            padding: 25px 40px 10px 40px;
            box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
            align-items: center;
            justify-content: center;
            align:center;
            margin-top:5%;
            }
            .table{
                border-spacing: 7px;
                border-collapse: separate;
            }
            </style>
{% endblock %}
{% block body %}
    <nav class="navbar navbar-expand-custom navbar-mainbg">
        <a class="navbar-brand navbar-logo" href="#"><img src="/images/logobookstore.png" width="130px" style="margin-left:3%"></a>
        <button class="navbar-toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars text-white"></i>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <div class="hori-selector"><div class="left"></div><div class="right"></div></div>
                <li class="nav-item ">
                    <a class="nav-link" href="{{ path('user_index') }}"><i class="fa fa-users"></i>Users</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ path('livre_index') }}"><i class="fa fa-book"></i>Books</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ path('genre_index') }}"><i class="fa fa-list"></i>Genres</a>
                </li>
                <li class="nav-item active" >
                    <a class="nav-link" href="{{ path('auteur_index') }}"><i class="fa fa-user"></i>Authors</a>
                </li>
                    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
					<li class="nav-item ">
					    <a class="nav-link active" href="{{ path('app_logout') }}"><i class="bi bi-box-arrow-left"></i> Logout</a>
					</li>
					{% else %}
						<li class="nav-item "><a href="{{ path('app_register') }}" class="nav-link active"><i class="bi bi-person-circle"></i> Sign Up</a></li>
                        <li class="nav-item "><a href="{{ path('app_login') }}" class="nav-link active"><i class="bi bi-box-arrow-in-right"></i> Login</a></li>
					{% endif %}
            </ul>
        </div>
    </nav>

      <div class="container">
         <div class="row">
            <div class="col-md-3" style="padding-top:5px">
            <a class="button-18 backhome"  href="{{ path('livre_index') }}"><i class="bi bi-skip-backward"></i>back to list</a>
            </div>
            <div class="col-md-5">
                <h1>Details Livre</h1>
            </div>
        </div>
        <hr>
            <table class="table" >
                <tbody>
                    <tr>
                        <th>Id</th>
                        <td>{{ livre.id }}</td>
                        <th>Isbn</th>
                        <td>{{ livre.isbn }}</td>
                    </tr>
                    <tr>
                        <th>Titre</th>
                        <td>{{ livre.titre }}</td>
                        <th>Nombre_pages</th>
                        <td>{{ livre.nombrePages }}</td>
                    </tr>
                    <tr>
                        <th>Date_de_parution</th>
                        <td>{{ livre.dateDeParution ? livre.dateDeParution|date('Y-m-d') : '' }}</td>
                        <th>Note</th>
                        <td>{{ livre.note }}</td>
                    </tr>
                    <tr>
                        <th>Authors</th>
                        <td>
                           {% for auteur in livre.auteurs %}
                                <ul>
                                    <li>{{ auteur.nomPrenom }}</li>
                                </ul> 
                                {% else %}
                                        <ol>no records found</ol>
                            {% endfor %}
                        </td>
                    </tr>
                    <tr>
                        <th>Genres</th>
                        <td> 
                             {% for genre in livre.genres %}
                                <ul>
                                    <li>{{ genre.nom }}</li>
                                </ul> 
                                {% else %}
                                        <ol>no records found</ol>
                            {% endfor %}</td>
                    </tr>
                </tbody>
            </table>
        {% if is_granted('ROLE_ADMIN') %}
            <div class="row"> 
                <div class="col-md-3">
                        <a href="{{ path('livre_edit', {'id': livre.id}) }}" class="button-18" ><i class="bi bi-arrow-clockwise"></i>Edit</a>
                </div>
                <div  class="col-md-3">
                    {{ include('livre/_delete_form.html.twig') }}
                </div>
            </div>
        {% endif %}
        <br>
    </div>
    {% block javascripts %}
         <script>
           
             $(".multi-select").select2({
                maximumSelectionLength: 2
            });
        </script>
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
        <script>      // ---------Responsive-navbar-active-animation-----------
                function test(){
                    var tabsNewAnim = $('#navbarSupportedContent');
                    var selectorNewAnim = $('#navbarSupportedContent').find('li').length;
                    var activeItemNewAnim = tabsNewAnim.find('.active');
                    var activeWidthNewAnimHeight = activeItemNewAnim.innerHeight();
                    var activeWidthNewAnimWidth = activeItemNewAnim.innerWidth();
                    var itemPosNewAnimTop = activeItemNewAnim.position();
                    var itemPosNewAnimLeft = activeItemNewAnim.position();
                    $(".hori-selector").css({
                        "top":itemPosNewAnimTop.top + "px", 
                        "left":itemPosNewAnimLeft.left + "px",
                        "height": activeWidthNewAnimHeight + "px",
                        "width": activeWidthNewAnimWidth + "px"
                    });
                    $("#navbarSupportedContent").on("click","li",function(e){
                        $('#navbarSupportedContent ul li').removeClass("active");
                        $(this).addClass('active');
                        var activeWidthNewAnimHeight = $(this).innerHeight();
                        var activeWidthNewAnimWidth = $(this).innerWidth();
                        var itemPosNewAnimTop = $(this).position();
                        var itemPosNewAnimLeft = $(this).position();
                        $(".hori-selector").css({
                            "top":itemPosNewAnimTop.top + "px", 
                            "left":itemPosNewAnimLeft.left + "px",
                            "height": activeWidthNewAnimHeight + "px",
                            "width": activeWidthNewAnimWidth + "px"
                        });
                    });
                }
                $(document).ready(function(){
                    setTimeout(function(){ test(); });
                });
                $(window).on('resize', function(){
                    setTimeout(function(){ test(); }, 500);
                });
                $(".navbar-toggler").click(function(){
                    $(".navbar-collapse").slideToggle(300);
                    setTimeout(function(){ test(); });
                });



                // --------------add active class-on another-page move----------
                jQuery(document).ready(function($){
                    // Get current path and find target link
                    var path = window.location.pathname.split("/").pop();

                    // Account for home page with empty path
                    if ( path == '' ) {
                        path = 'index.html';
                    }

                    var target = $('#navbarSupportedContent ul li a[href="'+path+'"]');
                    // Add active class to target link
                    target.parent().addClass('active');
                });;
            </script>
        {% endblock %}
{% endblock %}
